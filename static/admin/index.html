<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Content Manager</title>
  </head>

  <body>
    <!-- Prevent automatic /admin/config.yml fetch -->
    <script>window.CMS_MANUAL_INIT = true;</script>

    <!-- Netlify CMS bundle (loads after <body>, so document.body exists) -->
    <script src="https://unpkg.com/netlify-cms@2/dist/netlify-cms.js"></script>

    <!-- Initialise CMS immediately -->
    <script>
      CMS.init({
        backend: {
          name: "github",
          repo: "pzwiernik/upf-statistics",    // owner/repo
          branch: "main",
          auth_type: "implicit",
          app_id: "Ov23liH7FdORtpnUHkkT"       // GitHub OAuth Client ID
        },

        media_folder: "static/uploads",
        public_folder: "/uploads",

        collections: [
          {
            name:  "people",
            label: "People",
            folder: "content/authors",
            create: true,
            slug: "{{slug}}",
            fields: [
              { label: "Name",        name: "title",       widget: "string" },
              { label: "Role",        name: "role",        widget: "string" },
              { label: "User Groups", name: "user_groups", widget: "list"   }
            ]
          }
        ]
      });
    </script>
  </body>
</html>